<?xml version="1.0"?>
<!--
/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes 2022-present. All rights reserved.
 * This product is licensed per Magento install
 * See https://hyva.io/license
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:Event/etc/events.xsd"
>
    <event name="checkout_cart_save_after">
        <!-- CHECKOUT RESET: Reset the navigator when a cart item gets added or updated. -->
        <observer name="CheckoutReset_HyvaCheckoutCheckoutCartSaveAfter"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutSessionReset"/>
    </event>

    <event name="customer_login">
        <!-- CHECKOUT RESET: Reset navigator when the customer logs in. -->
        <observer name="CheckoutReset_HyvaCheckoutCheckoutCustomerLogin"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutSessionReset"/>
    </event>

    <event name="checkout_submit_all_after">
        <!-- Transfer the quote comment onto an order status history item. -->
        <observer name="HyvaCheckoutCheckoutSubmitAllAfter"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutCheckoutSubmitAllAfter"/>
    </event>

    <event name="hyva_config_generate_before">
        <!-- Registering a module for inclusion in hyva-themes.json -->
        <!-- @see https://docs.hyva.io/hyva-themes/compatibility-modules/tailwind-config-merging.html -->
        <observer name="HyvaCheckoutCHyvaConfigGenerateBefore"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutHyvaConfigGenerateBefore"/>
    </event>

    <event name="layout_load_before">
        <!-- Add checkout body class(es) -->
        <observer name="HyvaCheckoutLayoutLoadBefore"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutLayoutLoadBefore"/>
    </event>

    <event name="magewire_shipping_address_activated">
        <!-- Make sure the applied shipping method is still applicable after the shipping address got updated. -->
        <observer name="HyvaCheckoutMagewireShippingAddressActivated"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutMagewireShippingAddressActivated"/>
    </event>

    <event name="hyva_checkout_init_after">
        <!-- Define the customer/guest default addresses on checkout initialization -->
        <!-- Enable first available shipping and/or payment method -->
        <observer name="HyvaCheckoutHyvaCheckoutInitAfter"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutHyvaCheckoutInitAfter"/>
    </event>

    <event name="sales_model_service_quote_submit_before">
        <!-- Ensure guest customer name details exist in quote and order objects. -->
        <observer name="HyvaCheckoutSalesModelServiceQuoteSubmitBefore"
                  instance="Hyva\Checkout\Observer\Frontend\HyvaCheckoutSalesModelServiceQuoteSubmitBefore"/>
    </event>
</config>
