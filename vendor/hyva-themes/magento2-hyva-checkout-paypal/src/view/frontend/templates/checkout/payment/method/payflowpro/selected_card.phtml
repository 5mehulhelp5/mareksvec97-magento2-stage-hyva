<?php
/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes 2022-present. All rights reserved.
 * This product is licensed per Magento install
 * See https://hyva.io/license
 */

declare(strict_types=1);

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use Hyva\Theme\Model\ViewModelRegistry;
use Hyva\CheckoutPayPal\ViewModel\Payment\Method\Payflowpro as ViewModel;

/** @var Escaper $escaper */
/** @var Template $block */
/** @var ViewModelRegistry $viewModels */
/** @var ViewModel $viewModel */

$viewModel = $viewModels->require(ViewModel::class);
$cardDetails = $viewModel->getCardDetails();
// phpcs:disable Generic.Files.LineLength.TooLong
?>
<div class="pp-card-view relative bg-blue-100 card rounded-lg w-64 h-40 md:w-72 md:h-44">
    <div class="pp-card-ending p-2 flex items-center bg-gray-50 text-gray-700 font-semibold">
        <div class="text-sm ">
            <span class="hidden lg:inline">
                <?= $escaper->escapeHtml(__('ending')) ?>
            </span>
            <?= $escaper->escapeHtml($cardDetails->getCardLast4()) ?>
        </div>
    </div>
    <div class="pp-card-expire p-2 flex mt-4">
        <div class="text-sm">
            <?= $escaper->escapeHtml($cardDetails->getExpirationMonth() . '/' . $cardDetails->getExpirationYear()) ?>
        </div>
    </div>

    <?php if ($iconData = $viewModel->getCardIconData($cardDetails->getCardType())): ?>

        <div class="pp-card-icon p-2 flex items-center absolute bottom-2 right-2">
            <div class="text-sm">
                <img src="<?= $escaper->escapeUrl($iconData['url']) ?>"
                     width="<?= $escaper->escapeHtmlAttr($iconData['width']) ?>"
                     height="<?= $escaper->escapeHtmlAttr($iconData['height']) ?>"
                     alt=""
                />
            </div>
        </div>

    <?php endif; ?>
</div>

