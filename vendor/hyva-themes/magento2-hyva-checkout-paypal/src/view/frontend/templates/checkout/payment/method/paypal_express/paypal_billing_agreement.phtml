<?php
/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes 2022-present. All rights reserved.
 * This product is licensed per Magento install
 * See https://hyva.io/license
 */

declare(strict_types=1);

use Hyva\CheckoutPayPal\Magewire\Payment\Method\PaypalExpress;
use Hyva\CheckoutPayPal\ViewModel\Payment\Method\PaypalExpress as ViewModel;
use Hyva\Theme\Model\ViewModelRegistry;
use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;

/** @var Escaper $escaper */
/** @var Template $block */
/** @var ViewModelRegistry $viewModels */
/** @var ViewModel $viewModel */
/** @var PaypalExpress $magewire */

$viewModel = $viewModels->require(ViewModel::class);
$magewire = $block->getParentBlock()->getData('magewire');
$methodCode = $magewire->getMethodCode();
?>
<div>
    <?php if ($viewModel->shouldAskBillingAgreement($methodCode)): ?>
        <div class="flex items-start mb-6 mt-2 p-4 bg-gray-100 rounded-lg items-center gap-x-4">
            <input type="checkbox"
                   wire:model="createBillingAgreement"
                   id="billing-agreement-<?= $escaper->escapeHtmlAttr($methodCode) ?>">
            <label for="billing-agreement-<?= $escaper->escapeHtmlAttr($methodCode) ?>"
                   class="text-gray-700 font-bold cursor-pointer">
                <?= $escaper->escapeHtml(__('Sign a billing agreement to streamline further purchases with PayPal.')) ?>
            </label>
        </div>
    <?php endif; ?>
</div>
